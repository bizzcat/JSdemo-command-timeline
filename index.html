
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>JSdemo-command-timeline</title>

    <link rel="stylesheet" href="font-awesome-4.6.3/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <link href="style.css" rel="stylesheet">
    <link href="stylesheets/site-styles.css" rel="stylesheet">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>


        <div class="app-intro">
          <h1><a href="https://bizzcat.github.io">Back to main page</a></h1>
          <p><a href="https://github.com/bizzcat/JSdemo-command-timeline/zipball/master">Download ZIP</a></p>
          <p><a class="buttons" href="https://github.com/bizzcat/JSdemo-command-timeline/tarball/master">Download TAR</a></p>
          <p><a href="https://github.com/bizzcat/JSdemo-command-timeline">View On GitHub</a></p>

          <p>
            A nifty JS app using dummy data for single page display. Teacher submits commands, students see agenda for the day.
            <br>
            Tools used: jQuery, Bootstrap, Font Awesome.
            <br>
            Since creating this, I have transferred it over into a React environment, where the quality of the code has drastically improved.
            <br>
            JS and CSS snippets below.
          </p>
        </div>

        <div id="session-1">
        </div>

        <div class="app-codeblock">
          <h1>JavaScript</h1>
          <xmp>

'use strict';

// hand setting data
var session = {
  "startTime": "9:00am",
  "endTime": "3:00pm",
}

var commands = [
  {
    "timeStamp": "9:30am",
    "commandName": "Start Reading",
    "commandType": "read",
    "createdBy": 1,
    "sentTo": [1, 2, 3, 4, 5, 6, 7, 8],
  },
  {
    "timeStamp": "11:30am",
    "commandName": "Make America great again!",
    "commandType": "america",
    "createdBy": 4,
    "sentTo": [7, 8],
  },
  {
    "timeStamp": "1:15pm",
    "commandName": "Go play outside",
    "commandType": "play",
    "createdBy": 2,
    "sentTo": [1, 2, 3, 4, 5],
  },
  {
    "timeStamp": "2:10pm",
    "commandName": "Save the gorillas!",
    "commandType": "science",
    "createdBy": 3,
    "sentTo": [1, 2, 3, 4, 5, 6, 7, 8],
  },
]

var students = [
  {"name": "Billy", "id": 1},
  {"name": "Sally", "id": 2},
  {"name": "Sid", "id": 3},
  {"name": "Squid", "id": 4},
  {"name": "Kyle", "id": 5},
  {"name": "Lyle", "id": 6},
  {"name": "Dopey", "id": 7},
  {"name": "Mopey", "id": 8}
]

var teachers = [
  { "name": "Mr. Adams", "id": 1 },
  { "name": "Mrs. Jefferson", "id": 2 },
  { "name": "Mrs. Goodall", "id": 3 },
  { "name": "Mr. Trump", "id": 4 },
]


function prependSessionEnd(session) {
  var endTime = "<p>" + session["endTime"] + "</p>";
  var endSeshText = '<p> Class session ended </p>';
  var endSeshImg = "<p class='end'></p>";
  var sessionEnd = $('<section></section>');

  sessionEnd.append( endTime )
    .append( endSeshImg )
    .append( endSeshText);

  prependBuffer()
  $('#session-1').prepend( sessionEnd );
}

function appendSessionStart(session) {
  var startTime = "<p>" + session["startTime"] + "</p>";
  var startSeshText = '<p> Class session started </p>';
  var startSeshImg = "<p class='start'></p>";
  var sessionStart = $('<section></section>');

  sessionStart.append( startTime )
    .append( startSeshImg )
    .append( startSeshText );

  $('#session-1').append(sessionStart);
}

function prependBuffer() {
  $('#session-1').prepend("<section class='buffer'></section>");
}

function getTeacherLine(teachers, command) {
  for (var index in teachers) {
    var teacher = teachers[index]
    var teacherID = teacher["id"]
    var teacherName = teacher["name"]
    if (teacherID === command["createdBy"]) {
      return "Sent by " + teacherName;
    }
  }
}

function getStudentList(students, commandStudentIDs) {
  var studentList = []
  for (var index1 in students) {
    var student1 = students[index1];
    var studentID1 = student1["id"]

    for (var index2 in commandStudentIDs) {
      var studentID2 = commandStudentIDs[index2];

      if (studentID1 === studentID2) {
        studentList.push(student1["name"])
      }
    }
  }
  return studentList
}

function getStudentNamesString(studentList) {
  var namesBelowSix = [];
  var namesAboveSix = [];

  for (var index in studentList) {
    if (index < 6) {
      namesBelowSix.push(studentList[index]);
    }
    else if (index >= 6) {
      namesAboveSix.push(studentList[index]);
    }
  }

  if (studentList.length < 6) {
    var studentNamesString = namesBelowSix.join(', ');
  }
  else if (studentList.length > 6) {
    var namesBelowSixString = namesBelowSix.join(', ');
    var namesAboveSixString = namesAboveSix.join(', ');
    var namesAboveSixTempString = "<h6 class='above-six-length'>(and " + namesAboveSix.length + " more) </h6> <h6 class='above-six' style='display: none;'> " + namesAboveSixString + "</h6>";

    var studentNamesString = [namesBelowSixString, namesAboveSixTempString].join(', ');
    }

  return "<h6>" + studentNamesString + "</h6>";
}

function getCommandToolTip(command, students, teachers) {
  var commandStudentIDs = command["sentTo"];
  var studentList = getStudentList(students, commandStudentIDs);
  var studentNamesString = getStudentNamesString(studentList);

  var commandName = '<h4>' + command["commandName"] + '</h4>';
  var teacherName = '<h6>' + getTeacherLine(teachers, command) + '</h6>';
  var sentToLine = "<h5> SENT TO " + studentList.length + " STUDENTS </h5>";

  var commandToolTip = [commandName, teacherName, sentToLine, studentNamesString].join('')

  return commandToolTip
  }

function getFontAwesomeIcon(commandType) {
  if (commandType === "read") { return $('<p></p>').append("<i class='fa fa-book'></i> ")};       // read play science america
  if (commandType === "play") { return $('<p></p>').append("<i class='fa fa-soccer-ball-o'></i> ")};
  if (commandType === "science") { return $('<p></p>').append("<i class='fa fa-medkit'></i> ")};
  if (commandType === "america") { return $('<p></p>').append("<i class='fa fa-resistance'></i> ")};
}

function getFullCommandSection(command, commandToolTip) {
  var commandTime = $('<p></p>').append(command["timeStamp"]);
  var commandTeacherID = command["createdBy"];
  var commandStudentIDs = command["sentTo"];
  var fontAwesomeIcon = getFontAwesomeIcon(command["commandType"]);

  fontAwesomeIcon.tooltip({title: commandToolTip, html: true, trigger: "none", placement: "right", padding: 0});
  fontAwesomeIcon.click( function() {

    $('.tooltip').not(this).tooltip("hide");
    $(this).tooltip("show");

    $('.above-six-length').on('click', function() {
      $('.above-six').css('display', 'inline');
      $(this).remove();
    });
  })

  var commandSection = $('<section></section>')
  commandSection.append(commandTime)
    .append(fontAwesomeIcon)

  return commandSection
}

function postCommand(commandSection) {
  prependBuffer();
  $('#session-1').prepend(commandSection);
}

function layoutCommands(session, commands, students, teachers) {
  for (var index in commands) {
    var command = commands[index];
    var commandToolTip = getCommandToolTip(command, students, teachers);
    var commandSection = getFullCommandSection(command, commandToolTip)
    postCommand(commandSection);
  }
  prependSessionEnd(session);
  appendSessionStart(session);
}

$(document).ready(function(){
    layoutCommands(session, commands, students, teachers);
    $('[data-toggle="tooltip"]').tooltip();
});

          </xmp>


          <h1>CSS</h1>

          <xmp>
/* SESSION BOX */
#session-1 {
  padding: 5%;
  width: 75%;
  margin: 12.5%;
  background-color: rgba(0,0,0,0.15);
  border-radius: 3em;
}


/* COMMAND SECTIONS */
section {
  display: flex;
  text-align: center;
}


/* COMMAND SECTION CONTENTS */
section > p {
  display: flex;
  justify-content: center;
  align-items: center;
  width: 3em;
  height: 3em;
  margin: 0em 3em;
}

section > p:nth-child(2) {
  margin-right: 1em;
  border: solid;
  border-radius: 3em;
  border-color: white;
  border-width: 0.24em;

}

section > p:nth-child(3) {
  margin-left: 0em;
  width: 14em;
}


/* BUFFER FOR GENERATING LINE */
.buffer {
  margin: 0em 6em;
  height: 5em;
  width: 7.5em;
  border-right: 0.1em solid rgba(0,0,0,0.45);
}


/* TOOLTIPS CONTAINER */
.tooltip-inner {
    background-color: white;
    padding: 0.5em;
    width: 30em;
    text-align: left;
}

.tooltip.right > .tooltip-arrow {
    border-right: 5px solid white;
}

/* TOOLTIP CONTENT */
h4, h5, h6 {
 margin: 0.2em 0em;
 padding: 0.2em 0em;
}

h4, h5 {
 color: rgba(0,0,0,0.8);
}

h6 {
 color: rgba(0,0,0,0.4);
}

/* START AND END SECTIONS */
.start {
  background-color: rgba(0,150,30,0.7);
}

.end {
  background-color: rgba(180,0,0,0.7);
}

          </xmp>
        </div>

    <!--[if !IE]><script>fixScale(document);</script><![endif]-->

    <script src="https://code.jquery.com/jquery-2.2.3.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
    <script src="command_timeline.js"></script>
  </body>
</html>
